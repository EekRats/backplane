{% extends 'base.html' %}
{% block content %}
<h2>Add New Component</h2>
<form method="POST">
    {{ form.hidden_tag() }}
    {{ form.type.label }} {{ form.type() }}<br>
    {{ form.part_id.label }} {{ form.part_id() }}<br>
    {{ form.name.label }} {{ form.name() }}<br>
    {{ form.manufacturer.label }} {{ form.manufacturer() }}<br>
    {{ form.year.label }} {{ form.year() }}<br>
    {{ form.specs.label }} {{ form.specs() }}<br>
    {{ form.location.label }} {{ form.location() }}<br>
    {{ form.status.label }} {{ form.status() }}<br>
    {{ form.notes.label }} {{ form.notes(rows=3) }}<br>
    {{ form.system_id.label }} {{ form.system_id() }}<br>
    {{ form.submit() }}
</form>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const typeField = document.querySelector("select[name='type']");
        const partIdField = document.querySelector("input[name='part_id']");

        typeField.addEventListener("change", function () {
            const type = typeField.value;
            fetch(`/next_part_id/${type}`)
                .then(response => response.json())
                .then(data => {
                    partIdField.value = data.next_id;
                });
        });
    });
</script>
{% endblock %}